<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <!-- 给定一个整数数组  nums 和一个正整数 k，
        找出是否有可能把这个数组分成 k 个非空子集，其总和都相等。

    示例 1：

    输入： nums = [4, 3, 2, 3, 5, 2, 1], k = 4
    输出： True
    说明： 有可能将其分成 4 个子集（5），（1,4），（2,3），（2,3）等于总和。

    来源：力扣（LeetCode）
    链接：https://leetcode-cn.com/problems/partition-to-k-equal-sum-subsets
    著作权归领扣网络所有。商业转载请联系官方授权，非商业转载请注明出处。 -->
    <script>
        var canPartitionKSubsets = function (nums, k) {
            nums = nums.sort((a, b) => b - a)
            let sum = nums.reduce((a, b) => a + b, 0)

            // 临界条件
            if (k > nums.length || sum % k !== 0) return false
            if (k === nums.length) return new Set(nums).size === 1
            let average = sum / k
            let sums = new Array(k).fill(0)
            return helper(0)

            function helper(i) {
                debugger
                if (i === nums.length) return true
                for (let j = 0; j < k; j++) {
                    if (sums[j] < average && nums[i] + sums[j] <= average) {
                        sums[j] += nums[i]
                        if (helper(i + 1)) {
                            return true;
                        }
                        // helper(i+1)失败，撤销操作
                        sums[j] -= nums[i]
                    }
                }
                return false
            }
        };

        console.log(canPartitionKSubsets([4, 3, 2, 3, 5, 2, 1], 4));

        // 作者：bhuhu
        // 链接：https://leetcode-cn.com/problems/partition-to-k-equal-sum-subsets/solution/hua-fen-wei-kge-xiang-deng-de-zi-ji-by-bhuhu/


        var canP = (nums, k) => {
            nums = nums.sort((a, b) => b - a)
            let sum = nums.reduce((a, b) => a + b, 0)
            if (k > nums.length || sum % k !== 0 || k == 0) return false
            if (k === nums.length) return new Size(nums).size === 1
            let average = sum / k
            let sums = new Array(k).fill(0)
            return helper(0)
            function helper(i) {
                if (i === nums.length) return true
                for (let j = 0; j < k; j++) {
                    if (sums[j] < average && nums[i] + sums[j] <= average) {
                        sums[j] += nums[i]
                        if (helper(i + 1)) return true
                        sums[j] -= nums[i]
                    }
                }
                return false
            }
        }

        var canP2 = (nums, k) => {
            nums = nums.sort((a, b) => b - a)
            let sum = nums.reduce((a, b) => a + b, 0)
            if (k > nums.length || sum % k !== 0 || k == 0) return false
            if (k === nums.length) return new Size(nums).size === 1
            let av = sum / k
            let sums = new Array(k).fill(0)
            return helper(0)

            function helper(i) {
                if (i === nums.length) return true
                for (let j = 0; j < k; j++) {
                    if (sums[j] < av && nums[i] + sums[j] <= av) {
                        sums[j] += nums[i]
                        if (helper(i + 1)) return true
                        sums[j] -= nums[i]
                    }
                }
                return false
            }
            function helper2(i) {
                if (i === nums.length) return true
                for (let j = 0; j < k; j++) {
                    if (sums[j] < av && nums[i] + sums[j] <= av) {
                        sums[j] += nums[i]
                        if (helper(i + 1)) return true
                        sums[j] -= nums[i]
                    }
                }
                return false
            }
            function helper3(i) {
                if (i === nums.length) return true
                for (let j = 0; j < k; j++) {
                    if (sums[j] < av && nums[i] + sums[j] <= av) {
                        sums[j] += nums[i]
                        if (helper(i + 1)) return true
                        sums[j] -= nums[i]
                    }
                }
                return false
            }
        }
        // 08-18复习
    </script>
</body>

</html>