<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <script>
        var reverseKGroup = function (head, k) {
            // 反转链表函数
            var reverseList = function (a, b) {
                let pre, cur, nxt;
                pre = null;
                cur = a;
                nxt = a;
                // 进行的操作是每次循环将cur->pre，注意b的方向没有改变
                while (cur != b) {
                    // 保存a的下一个值next
                    nxt = cur.next;
                    // 将cur指向上一个值pre（反转指向）
                    cur.next = pre;
                    // 将pre赋予当前值，当做下一次循环的pre
                    pre = cur;
                    // 将cur赋予新值，用于下一次循环的cur
                    cur = nxt;
                }
                // 返回的pre是b结点前一个节点，改变了方向
                return pre;
            }

            if (!head) {
                return null;
            }
            let a = head;
            let b = head;
            // 区间[a,b)包含k个元素
            for (i = 0; i < k; i++) {
                //剩余的结点数不足k个，反转结束
                if (b == null) {
                    return head;
                } else {
                    b = b.next;
                }
            }
            //反转前k个元素
            let newHead = reverseList(a, b);
            a.next = reverseKGroup(b, k);
            return newHead;
        };

// 作者：cym052
// 链接：https://leetcode-cn.com/problems/reverse-nodes-in-k-group/solution/jshan-xiang-xi-bu-zou-shuo-ming-by-cym05-tjnu/


        var reverseKG = (head,k)=>{
            var reverseL = (a,b) => {
                let pre,cur,nxt
                pre = null
                cur = a
                nxt = a
                while(cur != b){
                    nxt = cur.next
                    cur.next = pre
                    pre = cur
                    cur = nxt
                }
                return pre
            }
            if(!head)return null
            let a = head,b = head
            for(let i = 0;i<k;i++){
                if(b==null)return head
                else b = b.next
            }
            let newHead = reverseL(a,b)
            a.next = reverseKG(b,k)
            return newHead
        }
    </script>
</body>

</html>